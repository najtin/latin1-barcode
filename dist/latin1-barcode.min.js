var CodeTable,__spreadArray=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var n,i=0,d=t.length;i<d;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.C128A=0]="C128A",e[e.C128B=1]="C128B",e[e.C128C=2]="C128C"}(CodeTable||(CodeTable={}));var State=function(){function e(e,t,o,n){this.text=e,this.position=t,this.encoding=o,this.code=n}return e.prototype.current_position=function(){return this.position},e.prototype.code_length=function(){return this.code.length},e.prototype.cost=function(){return this.code.length},e.prototype.cost_per_char=function(){return 0==this.position?0:this.code.length/this.position},e.prototype.best_case_cost=function(){return this.code.length+(this.text.length-this.position)/2},e.prototype.new_extended=function(t,o,n){if(isNaN(o))throw"NAN";return new e(this.text,this.position+o,n,__spreadArray(__spreadArray([],this.code,!0),t,!0))},e.prototype.finalize_code=function(){for(var e=this.code,t=this.code[0],o=1;o<this.code.length;o++)t+=this.code[o]*o;t%=103,this.code.push(t),this.code.push(106);var n="0000000000";for(o=0;this.code.length;o++)n+=String(bitmaps[this.code[o]]);return n+="0000000000",this.code=e,n},e}(),latin1={"¡":161,"¢":162,"£":163,"¤":164,"¥":165,"¦":166,"§":167,"¨":168,"©":169,"ª":170,"«":171,"¬":172,"®":174,"¯":175,"°":176,"±":177,"²":178,"³":179,"´":180,"µ":181,"¶":182,"·":183,"¸":184,"¹":185,"º":186,"»":187,"¼":188,"½":189,"¾":190,"¿":191,"À":192,"Á":193,"Â":194,"Ã":195,"Ä":196,"Å":197,"Æ":198,"Ç":199,"È":200,"É":201,"Ê":202,"Ë":203,"Ì":204,"Í":205,"Î":206,"Ï":207,"Ð":208,"Ñ":209,"Ò":210,"Ó":211,"Ô":212,"Õ":213,"Ö":214,"×":215,"Ø":216,"Ù":217,"Ú":218,"Û":219,"Ü":220,"Ý":221,"Þ":222,"ß":223,"à":224,"á":225,"â":226,"ã":227,"ä":228,"å":229,"æ":230,"ç":231,"è":232,"é":233,"ê":234,"ë":235,"ì":236,"í":237,"î":238,"ï":239,"ð":240,"ñ":241,"ò":242,"ó":243,"ô":244,"õ":245,"ö":246,"÷":247,"ø":248,"ù":249,"ú":250,"û":251,"ü":252,"ý":253,"þ":254,"ÿ":255},bitmaps=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];function transition(e){var t=e.text.charCodeAt(e.position);e.text[e.position]in latin1&&(t=latin1[e.text[e.position]]);var o=e.text.length>e.position+1?e.text.charCodeAt(e.position+1):null;if(t>=32&&t<=47||t>=58&&t<=95){if(CodeTable.C128A==e.encoding||CodeTable.C128B==e.encoding)return[e.new_extended([t-32],1,e.encoding)];if(CodeTable.C128C==e.encoding)return[e.new_extended([100,t-32],1,CodeTable.C128B),e.new_extended([101,t-32],1,CodeTable.C128A)]}if(t>=48&&t<=57){if(CodeTable.C128A==e.encoding||CodeTable.C128B==e.encoding){var n=[e.new_extended([t-32],1,e.encoding)];return null!=o&&o>=48&&o<=57&&n.push(e.new_extended([99,10*(t-48)+(o-48)],2,CodeTable.C128C)),n}if(CodeTable.C128C==e.encoding){n=[e.new_extended([101,t-32],1,CodeTable.C128A),e.new_extended([100,t-32],1,CodeTable.C128B)];return null!=o&&o>=48&&o<=57&&n.push(e.new_extended([10*(t-48)+(o-48)],2,CodeTable.C128C)),n}}if(t>=0&&t<=37){if(CodeTable.C128C==e.encoding||CodeTable.C128B==e.encoding){n=[e.new_extended([101,t+64],1,CodeTable.C128A)];return CodeTable.C128B==e.encoding&&n.push(e.new_extended([98,t+64],1,CodeTable.C128B)),n}if(CodeTable.C128A==e.encoding)return[e.new_extended([t+64],1,CodeTable.C128A)]}if(t>=96&&t<=127){if(CodeTable.C128C==e.encoding||CodeTable.C128A==e.encoding){n=[e.new_extended([100,t-32],1,CodeTable.C128B)];return CodeTable.C128A==e.encoding&&n.push(e.new_extended([98,t-32],1,CodeTable.C128A)),n}if(CodeTable.C128B==e.encoding)return[e.new_extended([t-32],1,CodeTable.C128B)]}if(console.log("WARNING: Result may not be optimal"),t-160>=0&&t-160<=63){if(CodeTable.C128A==e.encoding)return[e.new_extended([101,t-128-32],1,CodeTable.C128A)];if(CodeTable.C128B==e.encoding)return[e.new_extended([100,t-128-32],1,CodeTable.C128B)];if(CodeTable.C128C==e.encoding)return[e.new_extended([100,100,t-128-32],1,CodeTable.C128B),e.new_extended([101,101,t-128-32],1,CodeTable.C128A)]}if(t-160>=64&&t-160<=94){if(CodeTable.C128A==e.encoding)return[e.new_extended([100,100,t-128-32],1,CodeTable.C128B)];if(CodeTable.C128B==e.encoding)return[e.new_extended([100,t-128-32],1,CodeTable.C128B)];if(CodeTable.C128C==e.encoding)return[e.new_extended([100,100,t-128-32],1,CodeTable.C128B)]}throw"Unsupported Character: >"+e.text[e.position]+"< at position "+e.position}var encodeC128=function(e){var t=[new State(e,0,CodeTable.C128A,[103]),new State(e,0,CodeTable.C128B,[104]),new State(e,0,CodeTable.C128C,[105])],o=new State(e,1,CodeTable.C128A,[]);o.code=[];for(var n=0;n<4*e.length;n++)o.code.push(-1);for(var i=0;t.length>0;){var d=t.pop();if(!(o.cost()<d.cost())){if(transition(d).forEach((function(n){if(isNaN(n.position))throw"NAN";n.position==e.length?o.cost()>n.cost()&&(o=n):o.cost()>n.best_case_cost()&&t.push(n)})),++i>400&&o.cost()<1/0){console.log("WARINING: Result may not be optimal.");break}i<=400?t.sort((function(e,t){return t.cost_per_char()-e.cost_per_char()})):t.sort((function(e,t){return e.current_position()-t.current_position()}))}}console.log("output"),console.log(o.code);var r=o.code[0];for(n=1;n<o.code.length;n++)r+=o.code[n]*n;r%=103,o.code.push(r),o.code.push(106);var a="0000000000";for(n=0;n<o.code.length;n++)a+=String(bitmaps[o.code[n]]);return a+="0000000000"};function draw_on_canvas(e,t,o,n){var i=encodeC128(e),d=t.getContext("2d");d.fillStyle="#FFFFFF",d.fillRect(0,0,o,n),d.fillStyle="#000000";for(var r=0,a=o/i.length,c=0;c<i.length;c++)"1"!=i[c]?(d.fillRect((c-r)*a,0,r*a,n),r=0):r+=1}function latin1_barcode(e,t,o,n){draw_on_canvas(e,document.getElementById(t),o,n)}"object"==typeof process&&(module.exports=draw_on_canvas);
